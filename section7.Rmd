---
title: "section7"
author: "Helen Simpson"
date: "10/20/2020"
output: html_document
---

```{r setup, include=FALSE}

rm(list = ls())

knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(usmap)
```

```{r}
my.data <- read_csv("./31117693.csv")

my.approve.data <- my.data %>% group_by(ppstaten) %>% tally(Q1 == "Approve") %>% rename(approve = n)

my.disapprove.data <- my.data %>% group_by(ppstaten) %>% tally(Q1 == "Disapprove") %>% rename(disapprove = n)
                                                             
my.new.data <- merge(my.approve.data, my.disapprove.data, by = "ppstaten", all = TRUE) 

my.new.data <- my.new.data %>% mutate(total = approve + disapprove, per.approve = approve / total) %>% rename(state = ppstaten)

plot_usmap(data = my.new.data, regions = "state", values = "per.approve") +
    scale_fill_gradient2(high = "red", 
                         low = "white") +
  theme_void()

ggsave()

```